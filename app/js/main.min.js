function lazyLoad(){new Blazy({})}function serviceWorker(){"serviceWorker"in navigator?(console.log("CLIENT: service worker registration in progress."),navigator.serviceWorker.register("/service-worker.js").then(function(){console.log("CLIENT: service worker registration complete.")},function(){console.log("CLIENT: service worker registration failure.")})):console.log("CLIENT: service worker is not supported")}window.onload=function(){FE.global.init(),FE.pages.home.init(),lazyLoad(),serviceWorker()};var FE={pages:{home:{datePicker:function(){var e=function(e){if("start"===e){var t=document.createElement("div");t.className="arrival-text",t.innerText="Start on";var o=document.querySelector(".quote-form__start-date-picker .pika-lendar");o.parentNode.insertBefore(t,o);var n=document.createElement("span");n.className="ic-close";var r=document.querySelector(".quote-form__start-date-picker .arrival-text");r.parentNode.insertBefore(n,r)}else if("end"===e){var a=document.createElement("div");a.className="departure-text",a.innerText="End on";var i=document.querySelector(".quote-form__end-date-picker .pika-lendar");i.parentNode.insertBefore(a,i);var l=document.createElement("span");l.className="ic-close";var c=document.querySelector(".quote-form__end-date-picker .departure-text");c.parentNode.insertBefore(l,c)}FE.global.hideElement(".pika-single.quote-form__start-date-picker .ic-close",".quote-form__start-date-picker","fade-in","fade-out"),FE.global.hideElement(".pika-single.quote-form__end-date-picker .ic-close",".quote-form__end-date-picker","fade-in","fade-out")},t=[],o=document.querySelector(".quote-form__start-date-wrapper"),n=new Pikaday({defaultDate:new Date,setDefaultDate:!0,numberOfMonths:4,minDate:new Date,onSelect:function(o){var r=o.getMonth();field=moment(n.toString()).format("MMMM DD YYYY"),t=field.split(" ");var i=document.querySelector(".quote-form__start-month"),l=document.querySelector(".quote-form__start-date"),c=document.querySelector(".quote-form__start-year");i.innerHTML=t[0],l.innerHTML=t[1],c.innerHTML=t[2],e("start"),document.querySelector(".pika-single.quote-form__start-date-picker").classList.remove("fade-in"),document.querySelector(".pika-single.quote-form__start-date-picker").classList.add("fade-out"),a.setMinDate(new Date(this.getDate().getTime()+parseInt(864e5))),a.setDate(new Date(this.getDate().getTime()+parseInt(864e5))),a.gotoMonth(r),e("end")}});n.el.classList.add("quote-form__start-date-picker"),o.parentNode.insertBefore(n.el,o.nextSibling),n.el.classList.add("fade-out"),FE.global.toggleElement(".quote-form__start-date-box",".quote-form__start-date-picker","fade-in","fade-out");var r=document.querySelector(".quote-form__end-date-wrapper"),a=new Pikaday({defaultDate:new Date,setDefaultDate:!0,numberOfMonths:4,minDate:new Date,onSelect:function(o){field=moment(a.toString()).format("MMMM DD YYYY"),t=field.split(" ");var n=document.querySelector(".quote-form__end-month"),r=document.querySelector(".quote-form__end-date"),i=document.querySelector(".quote-form__end-year");n.innerHTML=t[0],r.innerHTML=t[1],i.innerHTML=t[2],e("end"),document.querySelector(".pika-single.quote-form__end-date-picker").classList.remove("fade-in"),document.querySelector(".pika-single.quote-form__end-date-picker").classList.add("fade-out")}});a.el.classList.add("quote-form__end-date-picker"),r.parentNode.insertBefore(a.el,r.nextSibling),a.el.classList.add("fade-out"),e("start"),e("end"),FE.global.toggleElement(".quote-form__end-date-box",".quote-form__end-date-picker","fade-in","fade-out")},glideSlider:function(){new Glide(".glide",{type:"carousel",startAt:0,perView:1,gap:0,transitionType:"fade"}).mount()},locationMap:function(){var e=new GMaps({el:"#map",lat:51.492807,lng:-.19405,click:function(e){console.log("You clicked on the map")}}),t=(e.addMarker({lat:51.492807,lng:-.19405,title:"Earls Court",infoWindow:{content:"<h5>Earls Court</h5><div>London, United Kingdom</div>",maxWidth:200}}),GMaps.geocode({address:"Earls Court, United Kingdom",callback:function(t,o){"OK"==o?(latlng=t[0].geometry.location,e.setCenter(latlng.lat(),latlng.lng())):"ZERO_RESULTS"==o&&alert("Sorry, no results found")}}),[[51.491811,-.200787],[51.49487,-.189585],[51.490662,-.186239],[51.48767,-.195616]]);e.drawPolygon({paths:t,strokeColor:"#f20707",strokeOpacity:.3,strokeWeight:2,fillColor:"#00e676",fillOpacity:.4,mouseover:function(e){}}),e.addControl({position:"top_right",content:"Reload",style:{margin:"5px",padding:"1px 6px",border:"solid 1px #717B87",background:"#fff"},events:{click:function(e){FE.pages.home.locationMap()}}}),e.addControl({position:"top_right",content:"Geolocate",style:{margin:"5px",padding:"1px 6px",border:"solid 1px #717B87",background:"#fff"},events:{click:function(t){GMaps.geolocate({success:function(t){console.log("success"),e.setCenter(t.coords.latitude,t.coords.longitude)},error:function(e){console.log("error"),alert("Geolocation failed: "+e.message)},not_supported:function(){console.log("not supported"),alert("Your browser does not support geolocation")},always:function(){console.log("always")}})}}})},init:function(){FE.pages.home.datePicker(),FE.pages.home.glideSlider(),FE.pages.home.locationMap()}}},global:{selectElements:function(e){var t=document.querySelector(e),o=document.querySelectorAll(e);return o.length>1?o:1===o.length?t:void 0},removeElementTimeout:function(e,t,o){var n=document.querySelector(e);setTimeout(function(){n.classList.add(o)},t)},toggleElement:function(e,t,o,n){var r=document.querySelector(e),a=document.querySelector(t);a.classList.add(n),r.addEventListener("click",function(e){a.classList.contains(n)?(a.classList.remove(n),a.classList.add(o)):(a.classList.remove(o),a.classList.add(n))})},hideElement:function(e,t,o,n){var r,a=document.querySelectorAll(e);a.forEach(function(e){e.addEventListener("click",function(e){console.log("whoop"),this.querySelector(t)?(r=this.querySelector(t),r.classList.remove(o),r.classList.add(n)):(r=document.querySelector(t),r.classList.remove(o),r.classList.add(n))})})},showElement:function(e,t,o,n){var r,a=document.querySelectorAll(e);a.forEach(function(e){e.addEventListener("click",function(e){this.querySelector(t)?(r=this.querySelector(t),r.classList.remove(n),r.classList.add(o)):(r=document.querySelector(t),r.classList.remove(n),r.classList.add(o))})})},toggleChildElement:function(e,t,o,n){var r,a=document.querySelectorAll(e);a.forEach(function(e){e.addEventListener("click",function(e){r=this.querySelector(t),r.classList.contains(n)?(r.classList.remove(n),r.classList.add(o)):(r.classList.remove(o),r.classList.add(n))})})},rotateElement:function(e,t,o){var n,r=document.querySelectorAll(e);r.forEach(function(e){e.addEventListener("click",function(){n=this.querySelector(t),n.classList.contains(o)?n.classList.remove(o):n.classList.add(o)})})},changeHTML:function(e,t){var o=document.querySelectorAll(e),n=document.querySelector(t);o.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var t=this.innerText;n.innerText=t})})},init:function(){FE.global.removeElementTimeout(".preloader",2e3,"fade-out"),FE.global.toggleElement(".quote-form__button",".quote-form__fields","slide-down","slide-up"),FE.global.toggleElement(".quote-form__residency-select",".quote-form__residency-popover","fade-in","fade-out"),FE.global.toggleElement(".quote-form--residency-popover-intro .ic-close",".quote-form__residency-popover","fade-in","fade-out"),FE.global.changeHTML(".quote-form__country-name",".quote-form__residency-select span"),FE.global.hideElement(".quote-form__country-name",".quote-form__residency-popover","fade-in","fade-out"),FE.global.hideElement(".ic-menu",".ic-menu","fade-in","fade-out"),FE.global.showElement(".ic-menu",".ic-close","fade-in","fade-out"),FE.global.showElement(".ic-menu",".mobile-menu","fade-in","fade-out"),FE.global.hideElement(".ic-close",".ic-close","fade-in","fade-out"),FE.global.hideElement(".ic-close",".mobile-menu","fade-in","fade-out"),FE.global.showElement(".ic-close",".ic-menu","fade-in","fade-out"),FE.global.toggleChildElement(".mobile-menu__nav-item-title",".mobile-menu__drop-sub","slide-down","slide-up"),FE.global.rotateElement(".mobile-menu__nav-item-title",".mobile-menu__slide-up-down-arrow","rotate-right")}}};